"""Provide a dummy infrastructure that doesn't own a client and cluster.

This is mainly useful to be able to access an existing
:class:`distributed.Client` and :class:`distributed.deploy.Cluster`
using the :class:`Infrastructure` API.

In other words, it enables the usage of the high level API if you
created resources using the low level API.
"""


from .infrastructure import Infrastructure as _Infrastructure


class DummyInfrastructure(_Infrastructure):
    """:class:`Infrastructure` that does not own client or a cluster."""

    def __init__(self, client):
        """Initialize."""
        self.init_locks()
        self._client = client

    @classmethod
    def compute_fingerprint(cls, client):
        """Compute the combined hash of this class and the client."""
        return hash((cls, client))

    def __hash__(self):
        """Return the fingerprint of this instance."""
        return self.compute_fingerprint(self._client)

    def get_cluster(self):
        """Return ``None``, this class does not manage a cluster."""
        return None


# ****************************************
# AppDigest signature for component RAYUELA. Do not delete!
# ****************************************
# @(&)Synopsys_Unique_Signature Libname="dummy.py" Name="RAYUELA" Version="4.0.0" Type="REUSE" Injector="V-2023.09-DEV (8729328)"(&)@
